import { useState, useEffect, useMemo } from 'react';
import { onMessageReceived } from 'aws-amplify/in-app-messaging';

function useInAppMessagingState() {
    const [message, setMessage] = useState(null);
    useEffect(() => {
        const listener = onMessageReceived(setMessage);
        return listener.remove;
    }, []);
    return useMemo(() => ({
        clearMessage: () => {
            setMessage(null);
        },
        displayMessage: setMessage,
        message,
    }), [message]);
}

export { useInAppMessagingState };
